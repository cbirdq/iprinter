<html> 
   <head> 
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	 <title> QQ登录 </title>
	 <style type="text/css">
		html, body{font-size:14px; line-height:180%;}
	 </style>

   </head> 
   <body> 
   
	<div>
		<h3>qq登录中，请稍后...</h3>
	</div>

   </body> 
</html>

<script type="text/javascript" src="http://qzonestyle.gtimg.cn/qzone/openapi/qc_loader.js" charset="utf-8" data-callback="true"></script>

<script>
alert("qc_callback");

if(QC.Login.check()){
	var openid,accesstoken,nickname;
    //QQ成功登陆  
    QC.Login.getMe(function(openId, accessToken){  
        openid = openId;
        accesstoken = accessToken;
    }); 
	QC.api("get_user_info", {}).success(function(s) {
		nickname = s.data.nickname;
	});
	//开始写入数据库  
    $.ajax({
 	   url: "LoginServlet",
 	   method: "post",
 	   dataType: json,
 	   data: {
 		   openid: openId, 
 		   accesstoken: accessToken,
 		   nickname: nickname,
 		   action: "qc_login"
 	   },
 	   success: function() {
 		   alert(openid + " " + accesstoken + " " + nickname);
 		   return true;
 	   }
    });
}  

</script>